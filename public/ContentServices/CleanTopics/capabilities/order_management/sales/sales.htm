<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head />
    <body>The Sales module provides the order management functionality. The functionality is obtained through the ZED UI that renders orders with orders details and the Client API to get customer orders. Getting Totals for Order To get the Order with totals, the facade methodSalesFacade::getOrderByIdSalesOrder()creates an order level which returns theOrderTransferwith a hydrated grandTotal, subtotal, expense, discounts and more This is an improvement from the Sales 5.0 version where you had to useSalesAggregatorFacadeto get totalks. This version has been deprecated. Persisting Order Calculated Values All calculated values are persisted now, when order are first placed. The values are stored by orderSaver plugins from checkout bundle. Check\Pyz\Zed\Checkout\CheckoutDependencyProvider::getCheckoutOrderSaversfor currently available plugins. Some values can change during time when order refunded or partially refunded. Thencanceled_amountandrefundable_amountare recalculated and new values is persisted. At the same moment totals also change, but it does not overwrite old entry, but creates new row inspy_sales_order_totalwith this you have a history of order totals from the time order was placed. The following ER diagram shows persisted calculated values: Extension Points HydrateOrderPluginInterface - its an action which happens whenSalesFacade::getOrderByIdSalesOrder()method is called. This means that you may want to enrich youOrderTransferwith additional data. This plugins accepts passes OrderTransfer for additional population. There are already few plugins provided: DiscountOrderHydratePlugin- hydratesOrderTransferwith discount related data as it was stored when order is placed. ProductOptionOrderHydratePlugin- hydratesOrderTransferwith product option related data. ProductBundleOrderHydratePlugin- hydratesOrderTransferwith product bundle related data. ShipmentOrderHydratePlugin- hydratesOrderTransferwith shipment related data.</body>
</html>