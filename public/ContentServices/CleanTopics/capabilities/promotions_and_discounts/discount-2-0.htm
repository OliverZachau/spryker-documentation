<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head />
    <body>The latest version of this(Undefined variable: General.bundle/module)can be found here Discount The Discount(Undefined variable: General.Bundle/Module)is responsible of managing discounts in the Spryker OS. The schema below illustrates how discounts are modeled in Zed’s database. Discount Types There are two types of discounts: fixed amount discount ( e.g. 10€ off) the currency in which the discount is calculated is the currency used by the shop percentage discount ( e.g. 10% off) the discount has an interval of validity attached - it can be redeemed starting from Valid_From date and it expires after the Valid_To date. Privileged and Unprivileged Discounts Is_Privilegedflag assures that a discount can be redeemed by the customer if every discount decision rule associated to it is satisfied. If the cart includes more than one discount, a filter is being applied on the discounts, that executes the following two steps: select all privileged discounts. select one unprivileged discount with highest amount. Example 1 : the cart for an order with total amount of €100 contains the following discounts Discount amount Discount type Is_Privileged Discounted amount D1 15 Percentage True 15 D2 5 Amount False 5 D3 10 Percentage False 10 Maximum discount amount : D1 Privileged discounts : D1 Result : D1 and D3 is applied Example 2 : the cart for an order with total amount of €10 contains the following discounts Discount amount Discount type Is_Privileged Discounted amount D1 20 Percentage True 2 D2 3 Amount False 3 D3 10 Percentage False 1 Maximum discount amount : D2 Privileged discounts : D1 Result : D1 and D2 are applied Applying a Discount There two ways of applying a discount to an order : by having a cart rule : these discounts are contained in the cart and are calculated automatically by having a voucher code : these discounts must be added by the customer and they are calculated once they are entered Discount Decision Rules Every discount can have associated one or more decision rules. A discount decision rule entity is defined by a name that corresponds to a decision rule plugin and a value that’s passed as a parameter to the plugin’s operation that checks if the discount can be redeemed. Example: a discount has associated the following decision rules: Decision Rule Plugin Value MinimumCartItems 3 DayOfWeek Wednesday The discount can be redeemed only if both rules are satisfied: the cart contains at least 3 items and the purchase is made on a Wednesday. Cart Rule Discounts Cart Rules Discounts Cart Rule discounts are discounts that exist in the cart and don't need any input from the customer. Cart Rulediscounts are not linked to a voucher pool; they are contained in the cart and are calculated automatically. Example of cart rule discount : 10% discount on order items in category X, for orders with total amount higher than 50 euros. Discount Decision Rules total amount of the order is higher than 50 euros Collector Plugin collect the order items that are in the category X Calculator Plugin calculate the 10% discount on collected items (if the decision rule is satisfied) The discount is included in the cart so it is being calculated automatically, without any other input from the customer. Voucher Code Discounts Voucher Codediscounts are discounts that are linked to a voucher pool. In order to be applied, the associated voucher code must be entered by the customer. Once the voucher code is submitted, the calculation of the discount is being performed. The voucher codes associated to a discount voucher pool can be used once ( Is_Infinitely_Usable = false ) or can be used many time as long as the discount is valid ( Is_Infinitely_Usable = true ) Example of infinitely usable voucher codes : a 50% discount is offered to registered customers on orders containing at least 3 items, on the least expensive item ( a voucher code is sent by email to registered customers) The voucher code sent to the customers is the same and it’s linked to a voucher pool that has the flag Is_Infinitely_Usable set to true. Discount Decision Rules : order contains at least 3 items The collector plugin associated to this discount will select the least expensive order item added to the cart. The calculator plugin associated to this discount would calculated the discount ( 20 %) on the collected order item, if the associated discount decision rule is satisfied. The discount is calculated once the voucher code is entered by the user. Discount Decision Rules order contains at least 3 order items Collector Plugin select the least expensive order item added to the cart Calculator Plugin calculate the 20% discount on the collected order item Example of voucher codes that can be used once : customer receives a 20 euro discount after a complaint is filed. The voucher code is intended to be used only once, so it’s linked to a voucher pool that has the Is_Infinitely_Usable flag set to false. Discount Voucher Pools A discount voucher pool is linked to a voucher pool category, which is used to distinguish between voucher pool types ( e.g. : Customer Care, Marketing voucher pool categories) Discount voucher pools are intended to be used for bulk generation and management of discount voucher codes. A voucher is a code that can be sent out to customers by email or can be printed. As it can be observed in the above database schema, the voucher codes are linked to discount through the voucher pool. The discount voucher codes contained in a discount voucher pool behave the same : common discount decision rules common interval of validity in which they can be redeemed. same amount and discount type ( percentage/fixed amount) The discount vouchers can be redeemed once or multiple times ( this is marked by the value of the flagIs_Infinitely_Usablefrom the discount voucher pool). Discount Calculation The discounts are calculated on discountable objects ( e.g. : order item, order expense, item expense, item options) and are distributed in order to reduce the amount the customer has to pay. The discount calculation is done in the cart forCart Rulediscounts or at checkout forVoucher Codediscounts. The discount calculation flow is similar in both cases and follows the steps described below: Select active discounts from the discounts available with the purchase. If the count of active discounts is higher than 0, then discount calculation is needed. for each discount in the active discounts list, validate the decision rules : check if the date interval is valid ( current date is between Valid_From and Valid_To dates ) check every decision rule associated with the discount if all of the associated decision rules checks returned true and the date interval is valid, the discount is kept in the discount calculation flow. if the cart contains more than one discount, filter the discounts ( See Privileged and unprivileged discounts section ) Last review date: Sep. 1, 2017</body>
</html>