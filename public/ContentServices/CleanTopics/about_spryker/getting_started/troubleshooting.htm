<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head />
    <body>Click on an issue to see how to troubleshoot. Peer authentication failed for user postgres If you get the error below while running./setup, on theSetup Zedstep: Zed Exception: RuntimeException - psql: FATAL: Peer authentication failed for user "postgres" then open the PostgreSQL configuration file : sudo vim /etc/postgresql/9.4/main/pg_hba.conf and make sure that the first line contains the following input: TYPE DATABASE USER ADDRESS METHOD
local all postgres trust Too many open files in Dev VM If you get the error "Too many open files" while running./vendor/bin/installthen use Ulimit Unix tool to adjust a max number of open files. ulimit -n 65535 Error on box image download If you get an error on downloading debian91.box image file, then go to https://github.com/spryker/devvm/releases/download/ci-91/spryker-devvm.box and download it, then run the following command: vagrant box add /path/to/downloaded/image/debian83.box --name debian83
vagrant up The host path of the shared folder is missing If you getThe host path of the shared folder is missingerror when building the virtual machine in Windows, you need to clone the Spryker repository manually and start the machine again. To do this, execute the following commands: mkdir project
cd project
git clone https://github.com/spryker-shop/suite.git ./
cd ..
vagrant up NFS export issues If you get the following error : NFS is reporting that your exports file is invalid. Vagrant does
this check before making any changes to the file. Please correct
the issues below and execute "vagrant reload":
exports:3: path contains non-directory or non-existent components: /devvm/pillar
exports:3: no usable directories in export entry
exports:3: using fallback (marked offline): /
exports:4: path contains non-directory or non-existent components: /devvm/saltstack
exports:4: no usable directories in export entry
exports:4: using fallback (marked offline): / To fix it, please run the following commands: sudo rm /etc/exports
sudo touch /etc/exports NFS is reporting that your export file is invalid This may happen if you have previous VMs created and not properly destroyed (or even if you share the computer with someone else who had other VMs). sudo sed -i .bak '/VAGRANT-BEGIN/,/VAGRANT-END/d' /etc/exports Reinitialize VM vagrant halt
vagrant up --provision
# or
vagrant destroy
vagrant up .nfs files crash my console commands [09:02:42] Error: Error: ENOTEMPTY, directory not empty
'/data/shop/development/current/static/public/Yves/images/icons' at Error (native) You might get this error inside the development VM, when runningvendor/bin/consoleornpmcommands. This is caused by .nfs files inside the source folders. Make sure you have the latest DevVM installed! Ngnix open_file_cache has to be disabled: root@spryker-vagrant:~# grep -r open_file_cache /etc/nginx/
/etc/nginx/nginx.conf: open_file_cache off; To get the latest saltstack for your VM and reconfigure nginx, do the following: # on your host
cd vendor/spryker/saltstack (or where your saltstack repository is on your host)
git pull
# inside the vm
sudo salt-call state.highstate whitelist=nginx If you are running Mac OSX as a host system: disable Spotlight for your Code directory see " How to disable spotlight index for specific folder in Mac OS X ". To remove stale .nfs files, execute this either on your host or inside the VM: find . -name .nfs\* -exec rm {} \; My Elasticsearch dies [Elastica\Exception\Connection\HttpException]
Couldn't connect to host, Elasticsearch down? Restart Elasticsearch: # find out which elasticsearch you are using:
grep -r ELASTICA_PARAMETER__PORT /data/shop/development/current/config/Shared
# if you have port 10005
sudo -i service elasticsearch-development restart
# an older VM used port 9200
sudo -i service elasticsearch restart Do you have more than one Elasticsearch instances running? sudo -i service elasticsearch status
sudo -i service elasticsearch-development status
sudo -i service elasticsearch-testing status
# stop some (see above how to figure out which one)
sudo -i service elasticsearch... stop
# and disable them
sudo -i update-rc.d elasticsearch... disable Is your project using RabbitMQ (for store replication)? In case not, you can disable it to free up memory: # shutdown RabbitMQ
sudo /etc/init.d/rabbitmq-server stop
# disable the service for later startups
sudo -i update-rc.d rabbitmq-server disable Exception connecting to Redis This exception is caused by a corrupted Redis AOF file and returns the following error message: Exception: stream_socket_client(): unable to connect to tcp://......:10009 (Connection refused) It also logs the following error (you can find the logs in/data/logs/development/redis/...): Bad file format reading the append only file: make a backup of your AOF file, then use ./redis-check-aof --fix [filename]; To fix this exception: Run : sudo redis-check-aof --fix /data/shop/development/shared/redis/appendonly.aof You should get : Successfully truncated AOF Start the Redis server by running: sudo -i
service redis-server-development start Make sure Redis can write its log files under:/data/logs/development/redis/ sudo chown redis:redis /data/logs/development/redis/ -R Mac OSX users with iterm2 (locale error) If you encounter error messages like this one: perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
LANGUAGE = (unset),
LC_ALL = (unset),
LC_CTYPE = "de_DE.UTF-8",
LANG = "C"
are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
LANGUAGE = (unset),
LC_ALL = (unset),
LC_CTYPE = "de_DE.UTF-8",
LANG = "C"
are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C"). Go to iterm2’s Preferences -&gt; Profiles -&gt; Terminal and disable Set locale variables automatically. Setup MySQL Workbench Configure connection method TCP/IP over SSH to avoid port clashing with host system. For current connection values have a look atconfig/Shared/config_default-development_DE.php.Use$HOME/.vagrant.d/insecure_private_keyas an SSH Key File. MySQL In case the connection fails, please run the following command : CREATE USER 'root'@'%' IDENTIFIED BY ''; # no password will be set
GRANT ALL PRIVILEGES ON * . * TO 'root'@'%';
FLUSH PRIVILEGES; This command creates a new root user with full permissions. Browse Jenkins cronjobs You can open Jenkins on port 10007 and watch your scripts running: http://zed.de.suite.local:10007/ (URL works for standard VM, you may use a different host name). Connection error when trying to download box First runvagrant up --debugto analyze the cause. Mac OS If it complaints about wrong curl version you can try sudo rm -rf /opt/vagrant/embedded/bin/curl. This will solve the issue for the new Mac OS. Failed to decode response: zlib_decode(): data error If you see this error during composer install or composer update you need to change your composer config. Run composer config -ge in your terminal and replace the content with this one {
"repositories": {
"packagist": { "url": "https://packagist.org", "type": "composer" }
}
} Changing domain name of shop Change values of following keys in configuration: $config[ApplicationConstants::HOST_ZED] = 'zed.de.XXX.local';
$config[ApplicationConstants::HOST_YVES] = 'www.de.XXX.local'; The first key is responsible for proper call from Yves to Zed. The second key is used for domain name used for session cookie. When not properly set, add to cart will not work - your cart will stay empty always. Last review date:
Sep. 12, 2017</body>
</html>