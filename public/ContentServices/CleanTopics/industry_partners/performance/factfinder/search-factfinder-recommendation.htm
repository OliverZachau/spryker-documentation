<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head />
    <body>Prerequisites The FACT-Finder recommendation engine analyzes product and category relationships. The results are rendered in recommendations widget, which can be displayed on product details pages, homepage or in the shopping cart. Usage To add recommendations widget to product page, insert the following code intosrc/Pyz/Yves/Product/Theme/default/product/detail.twig: ... {{ fact_finder_recommendations({id: product.sku, mainId: product.idProductAbstract}, '@FactFinder/recommendations/products.twig') }} ... To add recommendations widget to cart page, modify cart controller (src/Pyz/Yves/Cart/Controller/CartController.php) to add array of product ids into template variables: Click here to expand the code sample &lt;?php ... class CartController extends AbstractController
{ /** * @return array */ public function indexAction(Request $request, ?array $selectedAttributes = null) { $quoteTransfer = $this-&gt;getClient() -&gt;getQuote(); $factFinderSid = $request-&gt;cookies-&gt;get(FactFinderConstants::COOKIE_SID_NAME); $quoteTransfer-&gt;setFactFinderSid($factFinderSid); $voucherForm = $this-&gt;getFactory() -&gt;getVoucherForm(); $cartItems = $this-&gt;getFactory() -&gt;createProductBundleGrouper() -&gt;getGroupedBundleItems($quoteTransfer-&gt;getItems(), $quoteTransfer-&gt;getBundleItems()); $cartItemsIds = []; $cartItemsNames = []; foreach ($cartItems as $cartItem) { $cartItemsNames[] = $cartItem-&gt;getName(); $cartItemsIds[] = $cartItem-&gt;getSku(); } $stepBreadcrumbsTransfer = $this-&gt;getFactory() -&gt;getCheckoutBreadcrumbPlugin() -&gt;generateStepBreadcrumbs($quoteTransfer); $itemAttributesBySku = $this-&gt;getFactory() -&gt;createCartItemsAttributeProvider() -&gt;getItemsAttributes($quoteTransfer, $selectedAttributes); $promotionStorageProducts = $this-&gt;getFactory() -&gt;getProductPromotionMapperPlugin() -&gt;mapPromotionItemsFromProductStorage( $quoteTransfer, $request ); $factFinderSdkProductCampaignRequestTransfer = $this-&gt;getFactory() -&gt;createFactFinderSdkProductCampaignRequestTransfer(); $factFinderSdkProductCampaignRequestTransfer-&gt;setProductNumber($cartItemsIds); $factFinderSdkProductCampaignRequestTransfer-&gt;setSid($factFinderSid); $campaigns = $this-&gt;getCampaigns( $factFinderSdkProductCampaignRequestTransfer, $cartItems ); return $this-&gt;viewResponse([ 'cart' =&gt; $quoteTransfer, 'cartItems' =&gt; $cartItems, 'attributes' =&gt; $itemAttributesBySku, 'cartItemsIds' =&gt; $cartItemsIds, 'cartItemsNames' =&gt; $cartItemsNames, 'voucherForm' =&gt; $voucherForm-&gt;createView(), 'stepBreadcrumbs' =&gt; $stepBreadcrumbsTransfer, 'promotionStorageProducts' =&gt; $promotionStorageProducts, 'campaigns' =&gt; $campaigns, ]); } ... Then add recommendations widget to cart page templatesrc/Pyz/Yves/Cart/Theme/default/cart/index.twig: ... {{ fact_finder_recommendations({id: cartItemsIds, mainId: cartItemsIds}, '@FactFinder/recommendations/products.twig') }} ... See also: Get a general idea about FACT-Finder Configure FACT-Finder Search Configure FACT-Finder Suggest module Configure FACT-Finder Campaign Manager module Learn more about FACT-Finder tracking system Learn how to export CSVs to FACT-Finder Last review date: Dec. 22nd, 2017</body>
</html>