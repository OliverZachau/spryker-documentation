<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Capabilities|Capabilities|Search and Filter">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Tutorial - Search</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" />
        <link href="../../resources/stylesheets/prism.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.topic-ratings-button
{
	-pie-background: transparent url('../../../Skins/Default/Stylesheets/Images/star-full.png') no-repeat center center;
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.edit-user-profile-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/edit-profile.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../resources/stylesheets/mainstyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search the Academy" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <script src="../../resources/prism.js">
                                </script>
                                <div class="search-container">
                                    <form class="search" action="#">
                                        <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                            <input class="search-field needs-pie" type="search" placeholder="Search" />
                                            <div class="search-filter-wrapper">
                                                <div class="search-filter">
                                                    <div class="search-filter-content">
                                                        <ul>
                                                            <li>All Files</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="search-submit-wrapper" dir="ltr">
                                                <div class="search-submit" title="Search">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="row collapse">
                                    <div class="top-bar">
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="topic-layout">
                                        <div>
                                            <div class="side-menu">
                                                <div data-sticky-container="" id="_xBFudTsTk6yn0OczuvKxQ">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="_xBFudTsTk6yn0OczuvKxQ:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/master.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="side-menu">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <div class="button-group star-buttons loading feedback-topic-required">
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                        </div>
                                                        <div class="button-separator feedback-topic-required">
                                                        </div>
                                                        <button class="button feedback-required login-button" id="normalLoginBtn" data-state1-class="login-button" data-state2-class="edit-user-profile-button" title="Login" data-state1-title="Login">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="login" />
                                                        </button>
                                                        <button class="button needs-pie print-button" title="Print">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                        </button>
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                                <h1>Tutorial - Search</h1>
                                                <p>Spryker provides a convenient way to search product data. You’re enabled to easily setup full-text and facet search. In this tutorial we will show how to implement a simple product search using Spryker. This tutorial will not cover all aspects in detail to keep it focused. There will be links throughout the article that will lead you to in depth articles on related topics. If you want to dive deeper into the search topic there’s a number of additional articles that cover various topics.</p>
                                                <h2>Search Collector</h2>
                                                <p>If you’re not familiar with the concept of collectors yet I highly recommend reading the article on Collectors. In order to provide data for the search index you will need to implement a dedicated collector and a processor for the product data mapping.</p>
                                                <h3>Collector</h3>
                                                <p>The collector that collects data and pushes it to <var>Elasticsearch</var> is <var>ProductCollector</var> (<var>Pyz/Zed/Collector/Business/Search</var>).</p>
                                                <p>The main operations performed by the search collector are :</p>
                                                <ul>
                                                    <li class="bullet_list" value="1"><var>createQuery()</var> - creates the query for gathering the data from the Sql database</li>
                                                    <li class="bullet_list" value="2"><var>processData()</var> - transforms the result of the database query into the format that’s stored in the Elasticsearch storage</li>
                                                </ul>
                                                <h3>Product Processor</h3>
                                                <p>When processing the query result, the mapping of the query result to the Elasticsearch structure is done through the <var>ProductSearchProcessor</var>.</p>
                                                <p>Example :</p><pre><code class="language-PHP line-numbers">$baseProduct['integer-sort']['size'] = isset($attributes['size']) ? $attributes['size'] : 0;</code></pre>
                                                <p>The line above would allow to perform an integer sort based on the values of the size field, by setting this attribute in the Elasticsearch data storage.</p>
                                                <p>After you have set up the collector and processor you need to hook it up as a plugin to the <var>collector:search:export </var>console command. Details about how to setup console commands can be found in the Console article.</p>
                                                <h2>Introduction to the Search Client</h2>
                                                <p>You can access the search from within Yves using the <var>Catalog</var> <span class="Generalbundle/module">(Undefined variable: General.bundle/module)</span>’s client <var>Spryker\Client\Catalog\CatalogClient</var>. This client provides two methods that can be used to query the search index</p>
                                                <ul>
                                                    <li class="bullet_list" value="1">createFulltextSearch() - the search is made on all products; multiple filter criteria can be applied</li>
                                                    <li class="bullet_list" value="2">createFacetSearch() - the search is made over a category of products; multiple filter criteria can be applied</li>
                                                </ul>
                                                <h2>SimpleSearch <span class="Generalbundle/module">(Undefined variable: General.bundle/module)</span> (full-text search)</h2>
                                                <p>To exemplify how the search functionality works, we’ll add a new <span class="Generalbundle/module">(Undefined variable: General.bundle/module)</span> that will contain these examples, called <var>SimpleSearch</var>. The new <span class="Generalbundle/module">(Undefined variable: General.bundle/module)</span> will be added on the project side, in the Yves folder (because it’s a functionality we’ll exemplify in Yves).</p>
                                                <p>These are the steps we will cover:</p>
                                                <ul>
                                                    <li class="bullet_list" value="1">Set up a controller to handle requests and communicate with the search client</li>
                                                    <li class="bullet_list" value="2">Set up a template to show results</li>
                                                    <li class="bullet_list" value="3">Set up URL routing to access the controller</li>
                                                </ul>
                                                <h3>Controller and Template</h3>
                                                <p>User interface interactions will be forwarded to a dedicated controller that will take care of the communication with the search client.</p>
                                                <h4>Controller</h4><pre><code class="language-PHP line-numbers">mkdir -p src/Pyz/Yves/SimpleSearch/Communication/Controller
touch src/Pyz/Yves/SimpleSearch/Communication/Controller/SimpleSearchController.php</code></pre>
                                                <p>Add an action in the controller that submits a full-text search and returns the results :</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Yves\SimpleSearch\Communication\Controller;

use Spryker\Yves\Application\Communication\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Request;

class SimpleSearchController extends AbstractController
{

    /**
     * @param Request $request
     *
     * @return array
     */
    public function fullTextSearchAction(Request $request)
    {
        $search = $this-&gt;getLocator()-&gt;catalog()-&gt;client()-&gt;createFulltextSearch($request);
        $searchResults = $search-&gt;getResult();

        return $searchResults;
    }

}</code></pre>
                                                <h4>Template</h4>
                                                <p>Next, add the view template for showing the list of products :</p><pre><code class="language-PHP line-numbers">mkdir -p src/Pyz/Yves/SimpleSearch/Theme/default/simple-search
touch src/Pyz/Yves/SimpleSearch/Theme/default/simple-search/full-text-search.twig</code></pre>
                                                <p>The template will be simple ( it will only show the name and price of the products, with a link to the products page). The price will be formatted by using the price twig extension. Place the following content into the full-text-search.twig file :</p><pre><code class="language-PHP line-numbers">{% extends "@application/layout/layout.twig" %}
{% block content %}
    &lt;/br&gt;
    &lt;div&gt;
        &lt;section &gt;
            {% for product in products %}
                &lt;article&gt;
                    &lt;a href="{{product.url}}"&gt;
                        &lt;h2&gt;{{product.abstract_name}}&lt;/h2&gt;
                        &lt;h2&gt;{{ product.valid_price | price }}&lt;/h2&gt;
                    &lt;/a&gt;
                &lt;/article&gt;
            {% endfor %}
        &lt;/section&gt;
    &lt;/div&gt;
{% endblock %}</code></pre>
                                                <p>You can find in-depth coverage on controllers and templates in the Controllers and Actions article. </p>
                                                <h3>Routing</h3>
                                                <p>There are a couple of steps involved to set up routing to the newly created controller. We will need to add some dependencies to our <var>SimpleSearchBundle</var> that will be required by the router. Please read the article URL Routing to get more in-depth coverage on this topic. For brevity sake of this article we will skip over details and show the implementation to get routing for the URL <var>/full-text-search</var> to the <var>fullTextSearchAction</var> controller action of <var>SimpleSearchController</var> working.</p>
                                                <p>Add a router to map the URL to the <var>FullTextSearch</var> action:</p><pre><code class="language-PHP line-numbers">mkdir -p src/Pyz/Yves/SimpleSearch/Communication/Plugin/Router
touch src/Pyz/Yves/SimpleSearch/Communication/Plugin/Router/FullTextSearchRouter.php</code></pre>
                                                <p>Route the URL to the action you added in the <var>SimpleSearchController</var>:</p>
                                                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Click to expand the code sample</a></span>
                                                    <div class="MCDropDownBody dropDownBody"><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Yves\SimpleSearch\Communication\Plugin\Router;

use Spryker\Yves\Kernel\Locator;
use Spryker\Shared\Application\Communication\ControllerServiceBuilder;
use Spryker\Yves\Application\Business\Routing\AbstractRouter;
use Spryker\Yves\Kernel\Communication\BundleControllerAction;
use Spryker\Yves\Kernel\Communication\Controller\RouteNameResolver;
use Spryker\Yves\Kernel\Communication\ControllerLocator;
use Pyz\Yves\SimpleSearch\Communication\SimpleSearchCommunicationFactory;
use Symfony\Component\Routing\Exception\ResourceNotFoundException;
use Symfony\Component\Routing\Exception\RouteNotFoundException;

/**
 * @method Pyz\Yves\SimpleSearch\Communication\SimpleSearchCommunicationFactory getFactory()
 */
class FullTextSearchRouter extends AbstractRouter
{

    /**
     * @throws \Symfony\Component\Routing\Exception\RouteNotFoundException
     *
     * @param string $name
     * @param array $parameters
     * @param string $referenceType
     *
     * @return void
     */
    public function generate($name, $parameters = [], $referenceType = static::ABSOLUTE_PATH)
    {
        if ('/full-text-search' === $name) {
            $request = $this-&gt;getRequest();
            $requestParameters = $request-&gt;query-&gt;all();
             if (!isset($parameters['page']) &amp;&amp; isset($requestParameters['page'])) {
                unset($requestParameters['page']);
            }
            $pathInfo = $this-&gt;getUrlMapper()-&gt;generateUrlFromParameters(
                $this-&gt;getUrlMapper()-&gt;mergeParameters($requestParameters, $parameters)
            );
            $pathInfo = $name . $pathInfo;

            return $this-&gt;getUrlOrPathForType($pathInfo, $referenceType);
        }
        throw new RouteNotFoundException();
    }

    /**
     * @throws \Symfony\Component\Routing\Exception\ResourceNotFoundException
     *
     * @param string $pathinfo
     *
     * @return void
     */
    public function match($pathinfo)
    {
        if ($pathinfo === '/full-text-search') {
            $request = $this-&gt;getRequest();
            $this-&gt;getUrlMapper()-&gt;injectParametersFromUrlIntoRequest($pathinfo, $request);

            $bundleControllerAction = new BundleControllerAction('SimpleSearch', 'SimpleSearch', 'fullTextSearch');
            $controllerResolver = new ControllerLocator($bundleControllerAction);
            $routeResolver = new RouteNameResolver('Simplesearch');

            $service = (new ControllerServiceBuilder())-&gt;createServiceForController(
                $this-&gt;getApplication(),
                Locator::getInstance(),
                $bundleControllerAction,
                $controllerResolver,
                $routeResolver
            );

            return [
                '_controller' =&gt; $service,
                '_route' =&gt; $routeResolver-&gt;resolve(),
            ];
        }
        throw new ResourceNotFoundException();
    }

    /**
     * @return \Pyz\Yves\FrontendExporter\Communication\Mapper\UrlMapperInterface
     */
    private function getUrlMapper()
    {
        return $this-&gt;getFactory()-&gt;createUrlMapper();
    }

    /**
     * @return \Symfony\Component\HttpFoundation\Request
     */
    private function getRequest()
    {
        $application = $this-&gt;getApplication();
        $request = ($application['request_stack']) ? $application['request_stack']-&gt;getCurrentRequest() : $application['request'];

        return $request;
    }

    /**
     * @return \Silex\Application
     */
    private function getApplication()
    {
        return $this-&gt;getFactory()-&gt;createApplication();
    }
}</code></pre>
                                                    </div>
                                                </div>
                                                <p>Register the new added router in YvesBootstrap :</p><pre><code class="language-PHP line-numbers">&lt;?php
/**
 * @param Application $app
 *
 * @return RouterInterface[]
 */
protected function getRouters(Application $app)
{
    $locator = $this-&gt;getLocator($app);

    return [
        //..
        $locator-&gt;simplesearch()-&gt;pluginRouterFulltextSearchRouter()-&gt;setSsl(false),
        new SilexRouter($app),
    ];
}</code></pre>
                                                <p>To have access to the necessary dependencies, add a communication factory under the Communication layer:</p><pre><code class="language-PHP line-numbers">touch src/Pyz/Yves/SimpleSearch/Communication/SimpleSearchCommunicationFactory.php</code></pre>
                                                <p>Place the following code in your communication factory:</p>
                                                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Click to expand the code sample</a></span>
                                                    <div class="MCDropDownBody dropDownBody"><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Yves\SimpleSearch\Communication;

use Spryker\Zed\Kernel\Communication\AbstractCommunicationFactory;

class SimpleSearchCommunicationFactory extends AbstractCommunicationFactory
{

    /**
     * @return \Pyz\Yves\FrontendExporter\Communication\Mapper\UrlMapperInterface
     */
    public function createUrlMapper()
    {
        return $this-&gt;getLocator()-&gt;frontendExporter()-&gt;pluginUrlMapper()-&gt;createUrlMapper();
    }

    /**
     * @return \Silex\Application
     */
    public function createApplication()
    {
        return $this-&gt;getLocator()-&gt;application()-&gt;pluginPimple()-&gt;getApplication();
    }

}</code></pre>
                                                    </div>
                                                </div>
                                                <h2>Testing the Implementation</h2>
                                                <p>If you navigate to <a href="http://www.de.demoshop.local/full-text-search?q=brown" target="_blank">http://www.de.demoshop.local/full-text-search?q=brown</a> in your browser of choice you will see search results for products that match the term <var>brown</var>.</p>
                                                <p>You can also add filters or sort the results on various criteria, as in the examples below :</p>
                                                <ul>
                                                    <li class="bullet_list" value="1"><a href="http://www.de.demoshop.local/fulltextsearch?q=brown&amp;price=0-7" target="_blank" title="demoshop" alt="demoshop">http://www.de.demoshop.local/fulltextsearch?q=brown&amp;price=0-7</a>
                                                    </li>
                                                    <li class="bullet_list" value="2"><a href="http://www.de.demoshop.local/fulltextsearch?q=Seepferdchen&amp;main_color=red&amp;sort=name&amp;sort_order=asc" target="_blank" title="demoshop" alt="demoshop">http://www.de.demoshop.local/fulltextsearch?q=Seepferdchen&amp;main_color=red&amp;sort=name&amp;sort_order=asc</a>
                                                    </li>
                                                </ul>
                                                <h2>Adding Pagination</h2>
                                                <p>Paginating results is already built in and easy to set up. You only need to slightly change the implementation of the <var>fullTextSearchAction</var> in <var>SimpleSearchController</var>. Add the following line of code somewhere before <var>$searchResults = $search-&gt;getResult();</var> in <var>fullTextSearchActio</var></p><pre><code class="language-PHP line-numbers">$search-&gt;setItemsPerPage(10);</code></pre>
                                                <p>In the search view template, add navigation buttons to browse the results :</p><pre><code class="language-PHP line-numbers">&lt;div class="catalog__pagination"&gt;
    &lt;button class="pagination__button js-pagination-prev"&gt;catalog.prev&lt;/button&gt;
    &lt;button class="pagination__button js-pagination-next"&gt;catalog.next&lt;/button&gt;
&lt;/div&gt;</code></pre>
                                                <h2>Facets and Sorting</h2>
                                                <p>After the data is correctly collected and stored in Elasticsearch in the best suited format, Yves must be able to build a query request that the Elasticsearch service can understand in order to get the correct search results.</p>
                                                <p>Each attribute after which we need to build a search query must be configured in FacetConfig, so that the request is correctly being built.</p>
                                                <p>Example :</p><pre><code class="language-PHP line-numbers">&lt;?php
'size' =&gt; [
    static::KEY_FACET_ACTIVE =&gt; true,
    static::KEY_SORT_ACTIVE =&gt; true,
    static::KEY_FACET_FIELD_NAME =&gt; static::FIELD_INTEGER_FACET,
    static::KEY_TYPE =&gt; static::TYPE_ENUMERATION,
    static::KEY_PARAM =&gt; 'size',
]</code></pre>
                                                <p>The configuration above allows to perform a search using the <var>size</var> attribute, which is stored under the integer facet and to sort the results on this value.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>