<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-conditions="Spryker.B2C,Spryker.B2B" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Capabilities|Capabilities|Navigation">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Navigation Module Version 1.*  </title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" />
        <link href="../../resources/stylesheets/prism.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.topic-ratings-button
{
	-pie-background: transparent url('../../../Skins/Default/Stylesheets/Images/star-full.png') no-repeat center center;
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.edit-user-profile-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/edit-profile.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../resources/stylesheets/mainstyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search the Academy" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <script src="../../resources/prism.js">
                                </script>
                                <div class="search-container">
                                    <form class="search" action="#">
                                        <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                            <input class="search-field needs-pie" type="search" placeholder="Search" />
                                            <div class="search-filter-wrapper">
                                                <div class="search-filter">
                                                    <div class="search-filter-content">
                                                        <ul>
                                                            <li>All Files</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="search-submit-wrapper" dir="ltr">
                                                <div class="search-submit" title="Search">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="row collapse">
                                    <div class="top-bar">
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="topic-layout">
                                        <div>
                                            <div class="side-menu">
                                                <div data-sticky-container="" id="mopK2xS5tECm5IWE-rFDUA">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="mopK2xS5tECm5IWE-rFDUA:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/master.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="side-menu">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <div class="button-group star-buttons loading feedback-topic-required">
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                        </div>
                                                        <div class="button-separator feedback-topic-required">
                                                        </div>
                                                        <button class="button feedback-required login-button" id="normalLoginBtn" data-state1-class="login-button" data-state2-class="edit-user-profile-button" title="Login" data-state1-title="Login">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="login" />
                                                        </button>
                                                        <button class="button needs-pie print-button" title="Print">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                        </button>
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                                <h1>Navigation Module Version 1.* <img src="../../resources/images/shoptype/b2b_shop.png" /> <img src="../../resources/images/shoptype/b2c_shop.png" /></h1><a href="javascript:void(0);" class="MCHelpControl MCHelpControl-Related relatedTopics" data-mc-topics="navigation|../../developing_with_spryker/module_guide/navigation/navigation.htm" target="_self" style="mc-label: 'Versions';mc-help-control-display: popup;"><span class="MCHelpControl-RelatedHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Related Topics Link Icon" />Versions</span></a>
                                                <h2>Overview</h2>
                                                <p>The <var>Navigation</var> module manages multiple navigation menus that can be displayed on the frontend (Yves). Every navigation section can contain its own nested structure of navigation nodes. Navigation nodes have types that help define what kind of link they represent.</p>
                                                <p>The following node types are available:</p>
                                                <ul>
                                                    <li class="bullet_list" value="1"><strong>Label</strong>: These nodes do not link to any specific URL, they are used for grouping other nodes.</li>
                                                    <li class="bullet_list" value="2"><strong>Category</strong>: Nodes can be assigned to category node URLs.</li>
                                                    <li class="bullet_list" value="3"><strong>CMS Page</strong>: Nodes can be assigned to CMS page URLs.</li>
                                                    <li class="bullet_list" value="4"><strong>Link</strong>: These nodes link to internal pages in Yves, i.e. login, registration, etc.</li>
                                                    <li class="bullet_list" value="5"><strong>External URL</strong>: These nodes link to external URLs (typically tabs opened in a new browser).</li>
                                                </ul>
                                                <p>You can control and adjust Navigation node appearance and add icons by assigning custom CSS classes to them.</p>
                                                <p>This feature is shipped with three modules:</p>
                                                <ul>
                                                    <li class="bullet_list" value="1"><![CDATA[
]]><strong>Navigation module</strong> provides database structure and a public API to manage what’s in the database. It also provides a small toolkit for rendering navigation menus in the frontend.</li>
                                                    <li class="bullet_list" value="2"><strong>NavigationGui</strong> module provides a Zed UI to manage navigation menus.</li>
                                                    <li class="bullet_list" value="3"><strong>NavigationCollector</strong> module provides full collector logic for exporting navigation menus to the KV storage (Redis).</li>
                                                </ul>
                                                <h2>Feature Integration</h2>
                                                <h3>Prerequisites
		</h3>
                                                <p>To prepare your project to work with Navigation:

</p>
                                                <ol>
                                                    <li value="1">Require the Navigation modules in your <var>composer.json</var>.
</li>
                                                    <li value="2">Install the new database tables by running <var>vendor/bin/console propel:diff</var>. Propel will generate a migration file with the changes.
</li>
                                                    <li value="3">Apply the database changes: run <var>vendor/bin/console propel:migrate</var>.
</li>
                                                    <li value="4">Generate ORM models: run v<var>endor/bin/console propel:model:build</var>.
</li>
                                                    <li value="5">After running this command you’ll find some new classes in your project under <var>`\Orm\Zed\Navigation\Persistence`</var> namespace. </li>
                                                </ol>
                                                <p>It’s important to make sure that they extend the base classes from the Spryker core, e.g.:

</p>
                                                <ul>
                                                    <li class="bullet_list" value="1"><var>\Orm\Zed\Navigation\Persistence\SpyNavigation</var><strong> extends </strong><var>\Spryker\Zed\Navigation\Persistence\Propel\AbstractSpyNavigation</var>
                                                    </li>
                                                    <li class="bullet_list" value="2"><var>\Orm\Zed\Navigation\Persistence\SpyNavigationNode</var><strong> extends </strong><var>\Spryker\Zed\Navigation\Persistence\Propel\AbstractSpyNavigationNode</var>
                                                    </li>
                                                    <li class="bullet_list" value="3"><var>\Orm\Zed\Navigation\Persistence\SpyNavigationNodeLocalizedAttributes</var><strong> extends </strong><var>\Spryker\Zed\Navigation\Persistence\Propel\AbstractSpyNavigationNodeLocalizedAttributes</var>
                                                    </li>
                                                    <li class="bullet_list" value="4"><var>\Orm\Zed\Navigation\Persistence\SpyNavigationQuery</var><strong> extends </strong><var>\Spryker\Zed\Navigation\Persistence\Propel\AbstractSpyNavigationQuery</var>
                                                    </li>
                                                    <li class="bullet_list" value="5"><var>\Orm\Zed\Navigation\Persistence\SpyNavigationNodeQuery</var><strong> extends </strong><var>\Spryker\Zed\Navigation\Persistence\Propel\AbstractSpyNavigationNodeQuery</var>
                                                    </li>
                                                    <li class="bullet_list" value="6"><var>\Orm\Zed\Navigation\Persistence\SpyNavigationNodeLocalizedAttributesQuery</var><strong> extends </strong><var>\Spryker\Zed\Navigation\Persistence\Propel\AbstractSpyNavigationNodeLocalizedAttributesQuery</var>
                                                    </li>
                                                </ul>
                                                <ol start="6">
                                                    <li value="6">Run <var>vendor/bin/console transfer:generate</var> to get the new transfer objects.
</li>
                                                    <li value="7">Make sure that the new Zed UI assets are also prepared for use by running the <code>npm run zed</code> command (or <var>antelope build zed </var>for older versions).
</li>
                                                    <li value="8">To make the navigation management UI available in zed navigation, run <var>vendor/bin/console application:build-navigation-cache</var> command.
</li>
                                                    <li value="9">Activate the navigation menu collector by adding the <var>NavigationMenuCollectorStoragePlugin</var> to the storage collector plugin stack, see example below:
</li>
                                                </ol><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Collector;

use Spryker\Shared\Navigation\NavigationConfig;
use Spryker\Zed\Kernel\Container;
use Spryker\Zed\NavigationCollector\Communication\Plugin\NavigationMenuCollectorStoragePlugin;
// ...

class CollectorDependencyProvider extends SprykerCollectorDependencyProvider
{
    /**
     * @param \Spryker\Zed\Kernel\Container $container
     *
     * @return \Spryker\Zed\Kernel\Container
     */
    public function provideBusinessLayerDependencies(Container $container)
    {
        // ...
       
        $container[self::STORAGE_PLUGINS] = function (Container $container) {
            return [
                // ...
                NavigationConfig::RESOURCE_TYPE_NAVIGATION_MENU =&gt; new NavigationMenuCollectorStoragePlugin(),
            ];
        };
        
        // ...
    }
}
</code></pre>
                                                <h3>Data Setup
</h3>
                                                <p>You should now be able to manage navigation menus from Zed UI, and the collectors should also be able to export the navigation menus to the KV storage. This is a good time to implement an installer in your project to install a selection of frequently used navigation menus. </p>
                                                <h3>Usage in Yves<![CDATA[
]]></h3>
                                                <p>The KV storage should by now have some navigation menus we can display in our frontend.

</p>
                                                <p>The Navigation module ships with a twig extension that provides the <var>spyNavigation() </var>twig function which renders a navigation menu.

</p>
                                                <p><var>spyNavigation()</var> accepts two parameters:
</p>
                                                <ul>
                                                    <li class="bullet_list" value="1"><![CDATA[
]]><strong>$navigationKey</strong>: Reference of a navigation menu by its <var>key </var>field (i.e. <var>"MAIN_NAVIGATION"</var>).
</li>
                                                    <li class="bullet_list" value="2"><strong>$template</strong>: Template path used to render the navigation menu (i.e. <var>"@application/layout/navigation/main.twig"</var>).
</li>
                                                </ul>
                                                <p>To enable the navigation twig function register <var>\Spryker\Yves\Navigation\Plugin\Provider\NavigationTwigServiceProvider</var> in your application’s bootstrap.

</p><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Yves\Application;

use Spryker\Yves\Navigation\Plugin\Provider\NavigationTwigServiceProvider;
// ...

class YvesBootstrap
{
    /**
     * @return void
     */
    protected function registerServiceProviders()
    {
        // ...
        $this-&gt;application-&gt;register(new NavigationTwigServiceProvider());
    }
}
</code></pre>
                                                <p>Example, of rendering navigation in a yves twig template:
</p><pre><code class="language-PHP line-numbers">{{ spyNavigation('MAIN_NAVIGATION', '@application/layout/navigation/main.twig') }}
</code></pre>
                                                <h3>Rendering Navigation Templates
</h3>
                                                <p>The templates used to render a navigation menu, use the navigationTree template variable to traverse the <var>navigation tree</var>. The variable contains an instance of <var>\Generated\Shared\Transfer\NavigationTreeTransfer </var>with only one localized attribute per node for the current locale.

</p>
                                                <p>The following code examples show the Demoshop implementation of how to render <var>MAIN_NAVIGATION</var> which is a multi-level navigation menu. For styling we used the <a href="http://foundation.zurb.com/sites/docs/menu.html" target="_blank">Menu</a> and <a href="http://foundation.zurb.com/sites/docs/dropdown.html" target="_blank">Dropdown</a> components from Foundation framework.
</p>
                                                <p>
In <var>Pyz/Yves/Application/Theme/default/layout/navigation/main.twig</var> we traverse the root navigation nodes of the navigation tree and for each root node we render their children nodes as well.

</p><pre><code class="language-PHP line-numbers">&lt;div class="callout show-for-large"&gt;
    &lt;div class="row"&gt;
        &lt;div class="large-12 columns"&gt;
            &lt;ul class="menu"&gt;
                {% for node in navigationTree.nodes %}
                    {% embed '@Application/layout/navigation/_partials/base-node.twig' %}
                        {% block url %}
                            &lt;li {% if node.children|length %}data-toggle="navigation-node-{{ node.navigationNode.idNavigationNode }}-children"{% endif %} class="{{ class }}"&gt;
                                &lt;a href="{{ url }}"&gt;{{ title }}&lt;/a&gt;
                            &lt;/li&gt;
                        {% endblock %}

                        {% block link %}
                            &lt;li {% if node.children|length %}data-toggle="navigation-node-{{ node.navigationNode.idNavigationNode }}-children"{% endif %} class="{{ class }}"&gt;
                                &lt;a href="{{ link  }}"&gt;{{ title }}&lt;/a&gt;
                            &lt;/li&gt;
                        {% endblock %}

                        {% block externalUrl %}
                            &lt;li {% if node.children|length %}data-toggle="navigation-node-{{ node.navigationNode.idNavigationNode }}-children"{% endif %} class="{{ class }}"&gt;
                                &lt;a href="{{ externalUrl }}" target="_blank"&gt;{{ title }}&lt;/a&gt;
                            &lt;/li&gt;
                        {% endblock %}

                        {% block other %}
                            &lt;li {% if node.children|length %}data-toggle="navigation-node-{{ node.navigationNode.idNavigationNode }}-children"{% endif %} class="menu-text {{ class }}"&gt;
                                {{ title }}
                            &lt;/li&gt;
                        {% endblock %}
                    {% endembed %}
                {% endfor %}
            &lt;/ul&gt;

            {% for node in navigationTree.nodes %}
                {% if node.navigationNode.isActive %}
                    {% if node.children|length %}
                        &lt;div class="dropdown-pane" id="navigation-node-{{ node.navigationNode.idNavigationNode }}-children" data-dropdown data-hover="true" data-hover-pane="true"&gt;
                            {% include '@Application/layout/navigation/_partials/nodes.twig' with {nodes: node.children} %}
                        &lt;/div&gt;
                    {% endif %}
                {% endif %}
            {% endfor %}
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
                                                <p>The children nodes are rendered recursively by <var>Pyz/Yves/Application/Theme/default/layout/navigation/_partials/nodes.twig</var>.

</p><pre><code class="language-PHP line-numbers">&lt;ul class="vertical menu {% if nested|default(false) %}nested{% endif %}"&gt;
    {% for node in nodes %}
        {% embed '@Application/layout/navigation/_partials/base-node.twig' %}
            {% block nodeContainer %}
                &lt;li id="navigation-node-{{ node.navigationNode.idNavigationNode }}" data-id-navigation-node="{{ node.navigationNode.idNavigationNode }}" class="{{ class }}"&gt;
                    {{ parent() }}

                    {% if node.children|length %}
                        {% include '@Application/layout/navigation/_partials/nodes.twig' with {nodes: node.children, nested:true} %}
                    {% endif %}
                &lt;/li&gt;
            {% endblock %}

            {% block url %}
                &lt;a href="{{ url }}"&gt;{{ title }}&lt;/a&gt;
            {% endblock %}

            {% block link %}
                &lt;a href="{{ link }}"&gt;{{ title }}&lt;/a&gt;
            {% endblock %}

            {% block externalUrl %}
                &lt;a href="{{ externalUrl }}" target="_blank"&gt;{{ title }}&lt;/a&gt;
            {% endblock %}

            {% block other %}
                &lt;span class="menu-text"&gt;{{ title }}&lt;/span&gt;
            {% endblock %}
        {% endembed %}
    {% endfor %}
&lt;/ul&gt;
</code></pre>
                                                <p>To prevent code duplication we implemented the <var>Pyz/Yves/Application/Theme/default/layout/navigation/_partials/base-node.twig</var> template which we use to render a node by embedding it in the templates above.

</p><pre><code class="language-PHP line-numbers">{% set class = node.navigationNode.navigationNodeLocalizedAttributes[0].cssClass %}
{% set url = node.navigationNode.navigationNodeLocalizedAttributes[0].url %}
{% set externalUrl = node.navigationNode.navigationNodeLocalizedAttributes[0].externalUrl %}
{% set link = node.navigationNode.navigationNodeLocalizedAttributes[0].link %}
{% set title = node.navigationNode.navigationNodeLocalizedAttributes[0].title %}

{% if node.navigationNode.isActive %}
    {% block nodeContainer %}
        {% if url %}
            {% block url %}{% endblock %}
        {% elseif link %}
            {% block link %}{% endblock %}
        {% elseif externalUrl %}
            {% block externalUrl %}{% endblock %}
        {% else %}
            {% block other %}{% endblock %}
        {% endif %}
    {% endblock %}
{% endif %}
</code></pre>
                                                <h2>Under the Hood</h2>
                                                <h3>Database Schema
		</h3>
                                                <p>The Navigation module provides the <var>spy_navigation</var> table that stores navigation menus. They have a <var>name </var>field which is only used for backend display and they also have a <var>key </var>field used to reference the navigation menus from yves.
		</p>
                                                <p>
			Every navigation entity contains some nodes stored in the <var>spy_navigation_node</var> table. The structure of the navigation tree depends on the <var>fk_parent_navigation_node</var> and the <var>position </var>fields which define if a node has a parent on its level, in what position they are ordered.

			Each navigation node has attributes that can be different per displayed locale. This information is stored in the <var>spy_navigation_node_localized_attributes</var> table.
		</p>
                                                <p><![CDATA[
		]]><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../resources/images/navigation_db_schema_1_0.png" data-mc-popup-alt="Navigation Database Schema"><img class="MCPopupThumbnail img imgThumbnail" data-mc-width="780" data-mc-height="600" src="../../resources/images/navigation_db_schema_1_0_thumb_0_48.png" alt="Navigation Database Schema" title="Click Me" tabindex="" /></a></p>
                                                <p><b>See also:</b>
                                                </p>
                                                <ul>
                                                    <li value="1">&#160;</li>
                                                    <li value="2">&#160;</li>
                                                    <li value="3">&#160;</li>
                                                    <li value="4"><a href="mg-navigation.htm" class="MCXref xref">Migration Guide - Navigation Module  </a>
                                                    </li>
                                                    <li value="5"><a href="../../Developing with Spryker/Module Guide/Navigation/navigation.htm" class="MCXref xref">Navigation 2.*</a>
                                                    </li>
                                                </ul>
                                                <p>&#160;</p>
                                                <p><i>Last review date: Sep. 21st, 2017 </i>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>