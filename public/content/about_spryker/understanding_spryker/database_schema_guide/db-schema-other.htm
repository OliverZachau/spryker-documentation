<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="About Spryker|Understanding Spryker|Database Schema Guide">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Other Schemas</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/MadCapSearch.Google.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" />
        <link href="../../../resources/stylesheets/prism.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.topic-ratings-button
{
	-pie-background: transparent url('../../../../Skins/Default/Stylesheets/Images/star-full.png') no-repeat center center;
}

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.edit-user-profile-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/edit-profile.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/stylesheets/mainstyles.css" rel="stylesheet" />
        <link href="../../../resources/tablestyles/patternedrows.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearch.Google.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form>
                                            <div id="vWBl_yQF3k-8fbqzyH6cxg" class="search-bar search-bar-container needs-pie">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <script src="../../../resources/prism.js">
                                </script>
                                <div class="search-container">
                                    <form>
                                        <div id="LsTKwk6enU-XRWU_tSzG1g" class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                        </div>
                                    </form>
                                </div>
                                <div class="row collapse">
                                    <div class="top-bar">
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="topic-layout">
                                        <div>
                                            <div class="side-menu">
                                                <div data-sticky-container="" id="UvbSwYZSa066hsOc0EUt_w">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="UvbSwYZSa066hsOc0EUt_w:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/master.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="side-menu">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <div class="button-group star-buttons loading feedback-topic-required">
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                            <div class="button star-button topic-ratings-empty-button" data-state1-class="topic-ratings-empty-button" data-state2-class="topic-ratings-button" title="Click a star to rate this topic" data-state1-title="Click a star to rate this topic" data-state2-title="Click a star to rate this topic">
                                                                <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="topic rating" />
                                                            </div>
                                                        </div>
                                                        <div class="button-separator feedback-topic-required">
                                                        </div>
                                                        <button class="button feedback-required login-button" id="normalLoginBtn" data-state1-class="login-button" data-state2-class="edit-user-profile-button" title="Login" data-state1-title="Login">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="login" />
                                                        </button>
                                                        <button class="button needs-pie print-button" title="Print">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                        </button>
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                                <h1>Other Schemas</h1>
                                                <h2><b>CMS</b>
                                                </h2>
                                                <h3 style="color: #e35d44;"><span style="color: #e35d44;">Glossary</span>
                                                </h3>
                                                <p class="info">Every textual information can be provided in multiple languages. Languages are identified by a locale. For instance, the locale de_DE means "German language in Germany" which is different from de_CH "German language in Switzerland".</p>
                                                <p class="note">The Glossary is used for the translation of all customer-facing texts that appear on the website, in emails, invoices,... It is not used for Administration Interface translation.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/glossary.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">Every single text is identified by a key and has a value per locale.</li>
                                                </ul>
                                                <h3><span style="color: #e35d44;">CMS Pages</span>
                                                </h3>
                                                <p class="info">Create localized CMS pages based on predefined templates.</p>
                                                <p>There is a clear separation of the layout and the content of a CMS Page. The layout is hardcoded in a Twig Template and cannot be changed without deployment. The Template contains Markup with Placeholders (e.g. &lt;h3&gt;{{ spyCms('title') | raw }}&lt;/h3&gt;) which needs to be linked to Glossary Keys.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/cms-pages.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">A CMS Page has:</li>
                                                    <ul>
                                                        <li value="1">a localized name, some meta information and a validity date.</li>
                                                        <li value="2">a URL per locale.</li>
                                                        <li value="3">a Template as a path to a Twig file which contains Markup with Placeholders</li>
                                                        <li value="4">a Mapping of Placeholders to Glossary Keys.</li>
                                                        <li value="5"><i>is_searchable</i> - Flags if the CMS Page is included in the search results</li>
                                                    </ul>
                                                    <li value="2">Each revision of a CMS Page is archived as JSON data in <i>spy_cms_version::data</i></li>
                                                </ul>
                                                <h3><span style="color: #e35d44;">CMS Blocks</span>
                                                </h3>
                                                <p class="info">Create localized CMS content blocks that can be included on dynamic pages like the Cart- or Checkout.</p>
                                                <p>CMS Blocks are very similar to CMS Pages with the main difference that they are referenced by the name and there is no URL.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/cms-blocks.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">A CMS Block has:</li>
                                                    <ul>
                                                        <li value="1">a unique name which is used as a reference.</li>
                                                        <li value="2">a validity date.</li>
                                                        <li value="3">a Template as a path to a Twig file which contains Markup with Placeholders.</li>
                                                        <li value="4">a Mapping of Placeholders to Glossary Keys.</li>
                                                        <li value="5"> <i>type</i>, <i>fk_page</i>, and <i>value</i> are deprecated fields.</li>
                                                    </ul>
                                                    <li value="2">CMS Blocks can be toggled per Store.</li>
                                                </ul>
                                                <h3><span style="color: #e35d44;">CMS Block connection with Products and Categories</span>
                                                </h3>
                                                <p class="info">CMS Blocks can be integrated into other pages with a Twig function. But there are also other ways to integrate CMS Blocks on Category and Product Pages</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/cms-block-connection-products-categories.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">CMS Blocks are connected to Abstract Products and Categories via <i>*_connector</i> tables.</li>
                                                </ul>
                                                <h2 style="font-weight: bold;">Customer Lists</h2>
                                                <h3><span style="color: #e35d44;">Shopping List</span>
                                                </h3>
                                                <p class="info">Company users use shopping lists to prepare and manage orders that they do regularly. For example, a restaurant can prepare lists for their regular orders of meat, vegetables, and drinks. These lists can be merged into one cart, adjusted and checked out by the chef on a daily basis.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/shopping-list.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">A Shopping List has a name, a description, an owner and can be shared with others</li>
                                                    <ul>
                                                        <li value="1"><i>customer_reference</i> - This is the Customer who is the owner of the list. This is a soft relation which is not visible in the schema.</li>
                                                        <li value="2">The Shopping List can be <b>shared</b> with Company Users and Company Business Units.</li>
                                                    </ul>
                                                </ul>
                                                <h3><span style="color: #e35d44;">Wishlist</span>
                                                </h3>
                                                <p class="info">Customers can create one or multiple wishlists, add products to them and transfer wishlists to carts.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/wishlist.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">A Wishlist is owned by a Customer.</li>
                                                    <li value="2">A Wishlist Item is related to a Product but without Quantity or Product Options.</li>
                                                </ul>
                                                <h2><b>Discounts</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">Overview</span>
                                                </h3>
                                                <p class="info">Discounts are applied during the checkout either manually by the customer via Voucher code or automatically as Cart Rule. In both cases, the discount can have a fixed or a percentage value which is applied for all items or a subset that can be defined with a query string (e.g. only products with a specific attribute). Discounts can be toggled per store.</p>
                                                <p>The main process works like this:</p>
                                                <table style="width: 100%;mc-table-style: url('../../../resources/tablestyles/patternedrows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <tbody>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">1</td>
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows"><b>Find applicable discounts</b>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">Find all active Discounts that can be used for the Quote by checking the entered <b>Code</b> and evaluation of the <b>Query String</b> (boolean condition).</td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">2</td>
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows"><b>Collection &amp; Calculation</b>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                <p><b>Collection</b> of discountable items from the Quote and then <b>Calculation</b> of the discounted amount for each applicable Discount.</p>
                                                                <p class="note">Example: There is a Discount which says "10% on T-Shirts". So first we need to <b>collect</b> these items which can be discounted - T-Shirts in this case - and then the amount needs to be <b>calculated</b> (10% on the price of the T-Shirts; not the whole Quote).</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">3</td>
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows"><b>Filter</b>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                <p>When more than one Discounts are applicable then there are two scenarios:
</p>
                                                                <ol>
                                                                    <li value="1">If one of the Discounts is marked as <b>Exclusive</b> then only this one is used (If more then one are exclusive then the one with the highest Discount amount is used)</li>
                                                                    <li value="2">If none of the Discounts is exclusive, then all Discounts are used</li>
                                                                </ol>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">4</td>
                                                            <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows"><b>Distribution</b>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyA-Regular-DarkerRows">
                                                                <p>The filtered Discounts are distributed on those items that have been collected. See <a href="db-schema-sales.htm">Sales Schema</a> to understand the resulting data structure. </p>
                                                                <p class="note">When more than one discount was calculated it's important to know that each discount was calculated based on the price of the collected items. So it does not matter in which order the Discounts are applied.</p>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <h3><span style="color: #e35d44;">Cart Rule</span>
                                                </h3>
                                                <p class="info">A cart rule is a discount that is automatically added to the quote if certain conditions are satisfied. These conditions can be entered as a query string. For instance, you can say that the cart rule is applied if the subtotal is higher than an amount and the day-of-the-week is Tuesday. Alternatively, you can also define an SKU and a quantity to promote specific products directly.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/cart-rule.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">The table <i>spy_discount</i> contains the name, validity and other information:</li>
                                                    <ul>
                                                        <li value="1"><i>is_exclusive</i> - Flag that marks a Discount as exclusive.</li>
                                                        <li value="2"><i>discount_type</i> - Cart Rule or Voucher.</li>
                                                        <li value="3"><i>calculator_plugin</i> - A plugin that represents the calculation. We ship with a fix and a percentage calculator plugin.</li>
                                                        <li value="4"><i>decision_rule_query_string</i> - A boolean expression that decides if a discount can be applied (e.g. sku="*" AND sub_total &gt; 100).</li>
                                                        <li value="5"><i>collector_query_string</i> - A boolean expression that defined which products can be discounted (e.g. attribute.color = "white").</li>
                                                        <li value="6"><i>amount</i> - Percentage value (e.g. 10% Discount).</li>
                                                        <li value="7"><i>fk_store</i> -  Not used.</li>
                                                    </ul>
                                                    <li value="2">There is a many-to-many relation between Discounts and Stores.</li>
                                                    <li value="3">The money value of a Discount is saved as <i>gross_amount</i> and <i>net_amount</i> per currency.</li>
                                                </ul>
                                                <h3><span style="color: #e35d44;">Voucher Codes</span>
                                                </h3>
                                                <p class="info">A Voucher Code is basically the same as a Cart Rule but with a code which needs to be entered by the user.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/voucher-codes.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">Discounts are Vouchers if they have the <i>discount_type=voucher</i> and they are related to a Voucher Pool.</li>
                                                    <li value="2">A Voucher Pool has a name and a set of Vouchers.</li>
                                                    <li value="3">A Voucher is identified by its code.</li>
                                                    <ul>
                                                        <li value="1"><i>max_number_of_uses</i> - Defines how often the Voucher can be used. If set to null then the Voucher Code can be used unlimited.</li>
                                                        <li value="2"><i>number_of_uses</i> - Counts how often the Voucher was used already.</li>
                                                    </ul>
                                                </ul>
                                                <p class="note">There are two typical scenarios:</p>
                                                <ol>
                                                    <li value="1">A Voucher Pool with one Voucher Code that can be used unlimited times. This one is usually used for broadcast marketing (e.g. used in TV spots).</li>
                                                    <li value="2">A Voucher Pool with a high number of Voucher Codes which be used once. This one is usually used for direct marketing (e.g. emails to customers).</li>
                                                </ol>
                                                <h3><span style="color: #e35d44;">Discount Promotion</span>
                                                </h3>
                                                <p>Discount Promotion extends the Discount feature with product promotion functionality. Discount promotions add the ability to give away discounted or even free products to create promotions like “buy one, get one for free”, “buy product X, get product Y for free”, “buy 10 of product X and get 1 of product X for a discounted price”, etc.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/discount-promotion.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">The Discount is related to the SKU of one Abstract Product and a required Quantity.</li>
                                                </ul>
                                                <h2><b>Gift Cards</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">Gift Card Code</span>
                                                </h3>
                                                <p class="info">Enable your customers to buy gift cards with flexible amounts of money and to give it to friends as a gift. They can apply it like a voucher code during checkout and pay their whole orders or a part of it.</p>
                                                <p class="important">Gift cards are not Discounts!</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/gift-card.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">A Gift Card has a name and a code that can be entered by the Customer.</li>
                                                    <ul>
                                                        <li value="1"><i>value</i> - The money value of the Gift Card.</li>
                                                        <li value="2"><i>currency</i> - Ever Gift Card has a fixed currency.</li>
                                                    </ul>
                                                </ul>
                                                <h3><span style="color: #e35d44;">Gift Card Product</span>
                                                </h3>
                                                <p class="info">A Gift Card Product is a regular product in the shop which represents a Gift Card that Customer can buy.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/gift-card-product.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1"><b>Gift Card Abstract Configuration</b>:</li>
                                                    <ul>
                                                        <li value="1">The Abstract Product represents a specific type of Gift Cards with a code pattern (e.g. "XMAS-")</li>
                                                        <li value="2"><i>code_pattern</i> - Pattern that is used to create the unique code of the produced Gift Card after the purchase</li>
                                                    </ul>
                                                    <li value="2"><b>Gift Card Configuration</b>:</li>
                                                    <ul>
                                                        <li value="1">The Concrete Product represents a specific value that will be used to produce the Gift Card (e.g. "5 Euro")</li>
                                                        <li value="2"><i>value</i> - This is the money value which will be used to produce the Gift Card</li>
                                                    </ul>
                                                </ul>
                                                <h3><span style="color: #e35d44;">Gift Card Balance and Payment</span>
                                                </h3>
                                                <p class="info">Gift Cards are used to pay orders. If the Grand Total is higher than the Gift Card Amount then there is some left over. This is saved as a balance.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/gift-card-purchase-payment.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">Each Gift Card can be used for multiple Sales Orders. The applied amount is saved into <i>spy_gift_card_balance_log</i> per Sales Order. So to retrieve the used amount these rows need to be summed up. There is no way to refund a balance. In case of a refund, the system needs to create another Gift Card.</li>
                                                    <li value="2">When a Sales Order is saved then the table <i>spy_sales_payment</i> contains all used Payment Methods. As the Gift Card is a Payment Method, this needs to be saved here as well.</li>
                                                    <li value="3">There is an additional table <i>spy_payment_gift_card</i> which holds the used code.</li>
                                                </ul>
                                                <h2><b>Navigation</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">Overview</span>
                                                </h3>
                                                <p class="info">Every shop can have several independent navigation trees. For instance, there can be the main navigation that contains links to category pages or content pages.</p>
                                                <p class="note">The main difference to Categories is that a Category Tree represents a hierarchical structure for the Products while a Navigation is just a nested list of links.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/navigation.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">An entry in the Navigation has a name.</li>
                                                    <li value="2">The underlying tree structure is represented by Navigation Nodes.</li>
                                                    <ul>
                                                        <li value="1"><i>node_type</i> - can be "category", "link, "external_url", "cms_page" or "label".</li>
                                                    </ul>
                                                    <li value="3">There is one URL per localized Navigation Node. The URL is the only link to the resource. There are no other relations in the schema.</li>
                                                </ul>
                                                <h2><b>Shipment</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">Shipment carriers, method and price</span>
                                                </h3>
                                                <p class="info">The customer can select a shipment method and a related carrier during the checkout. Each shipment method has a dedicated price and tax set.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/shipment-carriers.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li style="font-weight: normal;" value="1">A Shipment Method has a name (e.g. "Express") and a Carrier (e.g. "DHL")</li>
                                                    <li style="font-weight: normal;" value="2">Each Shipment Method has a default net/gross price per currency and per store</li>
                                                    <li style="font-weight: normal;" value="3">The <i>spy_shipment_method::price</i> field is deprecated</li>
                                                </ul>
                                                <h3><span style="color: #e35d44;">Shipment Configuration</span>
                                                </h3>
                                                <p>In some use cases, shipments can become complicated. For this reason, the Shipment Method has three hooks for plugins.</p>
                                                <table style="width: 100%;mc-table-style: url('../../../resources/tablestyles/patternedrows.css');" class="TableStyle-PatternedRows" cellspacing="0">
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <thead>
                                                        <tr class="TableStyle-PatternedRows-Head-Header1">
                                                            <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">Optional Plugin</th>
                                                            <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">Purpose</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">availability_plugin</td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">Determines if the shipment method is selectable for the current quote (Default: Yes)</td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">price_plugin</td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">This plugin enables overriding the default prices. For instance, the price of the shipment may depend on the weight of a product or the distance to the customer's shipment address.</td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyB-Regular-LightRows">delivery_time_plugin</td>
                                                            <td class="TableStyle-PatternedRows-BodyA-Regular-LightRows">Allows defining a delivery date</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <h2><b>Tax</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">Tax Set and Rate</span>
                                                </h3>
                                                <p class="info">Each product can be related to a tax set which contains the tax rates for each destination country.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/tax-set-rate.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">A Tax Set has a name (e.g. "Food") It represents a group of products which have the same tax rates</li>
                                                    <li value="2">The Rate (e.g. 19%) is stored in <i>spy_tax_rate</i>. There is one Rate per Country which allows tax conversions for cross-border shipments.</li>
                                                </ul>
                                                <h2><b>URL</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">URLs</span>
                                                </h3>
                                                <p>Yves knows two types of URLs (see YvesBootstrap-&gt;<i>registerRouters()</i>).</p>
                                                <ol>
                                                    <li value="1">URLs that are defined in the database (e.g. for Product Detail, CMS or Category Pages).</li>
                                                    <li value="2">URLs that are defined in the code (e.g. for Cart and Checkout).</li>
                                                </ol>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/url.png" />
                                                </p>
                                                <p><span style="font-weight: bold;">Structure</span>:</p>
                                                <ul>
                                                    <li value="1">All URLs which are in the first category are stored in <i>spy_url</i>.</li>
                                                    <li value="2">Each URL is assigned to one Locale which means that there are multiple URLs per linked Resource (e.g. a Product Detail Page has one translated URL per Locale).</li>
                                                </ul>
                                                <h3><span style="color: #e35d44;">URL Ressources</span>
                                                </h3>
                                                <p class="info">URLs are related to Resources. A Resource can be something like a Category- or a Product Detail Page. Each Resource has one URL per Locale.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/url-resources.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">Several Resources are related to URLs</li>
                                                    <li value="2">The <i>spy_url</i> table holds all the foreign keys but there is a constraint that only one of the foreign keys is possible (in other words: One URL cannot be related to more than one resource).</li>
                                                </ul>
                                                <h2><b>Zed Administration</b>
                                                </h2>
                                                <h3><span style="color: #e35d44;">Zed Users and ACL</span>
                                                </h3>
                                                <p class="info">There can be multiple admin users with roles and permissions.</p>
                                                <p>
                                                    <img src="../../../resources/images/databaase_schema_guide/zed-users-acl.png" />
                                                </p>
                                                <p><b>Structure</b>:</p>
                                                <ul>
                                                    <li value="1">Users belong to Groups (e.g. "Operation Manager").</li>
                                                    <li value="2">Groups have Roles (e.g. "Manage Orders").</li>
                                                    <li value="3">Roles have Rules which define what the Role is allowed or disallowed to do.</li>
                                                    <li value="4">A Rule is a URL.</li>
                                                    <li value="5">type - allow/deny.</li>
                                                    <li value="6">bundle/controller/action - describes an URL (e.g. oms/trigger/trigger-event-for-order-items). Each segment can be replaced by a wildcard (e.g. oms/*/*).</li>
                                                    <li value="7">The term <i>"bundle"</i> is deprecated and was substituted by the term <i>"module"</i>. We kept the column name for BC reasons.</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>